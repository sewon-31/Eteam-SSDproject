<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>test_script2.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;cstdlib&gt;
#include &lt;ctime&gt;

#include "test_script2.h"
#include "ssd_interface.h"

bool testScript2::run(SSDInterface &amp;ssd)
<span style = "background-color:#dfd">{
    for (int i = 0; i &lt; 30; i++) {</span>
#if _DEBUG
<span style = "background-color:#dfd">        std::string num = "0x0000000A";</span>
#else
        std::string num = getRandomIntToString();
#endif
<span style = "background-color:#dfd">        ssd.write(4, num);
        ssd.write(0, num);
        ssd.write(3, num);
        ssd.write(1, num);
        ssd.write(2, num);</span>

<span style = "background-color:#dfd">        for (int j = 0; j &lt; 4; j++) {
            if (readCompare(j, num, ssd) == false) { </span>
<span style = "background-color:#fdd">                std::cout &lt;&lt; "FAIL";
                return false; </span>
            }
<span style = "background-color:#dfd">        }
    }</span>

<span style = "background-color:#dfd">    std::cout &lt;&lt; "PASS";
    return true;
}</span>

std::string testScript2::getRandomIntToString()
<span style = "background-color:#fdd">{</span>
    char buffer[11];
<span style = "background-color:#fdd">    std::srand(std::time(nullptr));</span>

<span style = "background-color:#fdd">    std::snprintf(buffer, sizeof(buffer), "0x%08X", (std::rand() % INT_MAX + 1));
    return std::string(buffer);
}</span>

bool testScript2::readCompare(int address, std::string num, SSDInterface&amp; ssd)
<span style = "background-color:#dfd">{
    if (ssd.read(address) == num) return true;</span>
<span style = "background-color:#fdd">    return false;</span>
<span style = "background-color:#dfd">}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>